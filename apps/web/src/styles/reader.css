/* Ensure hero-info follow-up typing shows proper effects even inside hero-intro */
/* Stronger specificity to beat .hero-intro neutralizers */
.hero-intro #hero-info .typewriter .noising-text,
#hero-info .typewriter .noising-text {
  display: block !important;
  white-space: pre-wrap !important; /* match Reader body/title typing */
  overflow: hidden;
  animation: reveal var(--typewriter-duration, 6s) steps(var(--typewriter-steps, 60)) both,
             caret var(--caret-duration, 1.2s) steps(1) infinite !important;
  border-right: 2px solid var(--c-neon-cyan) !important;
}
@media (prefers-reduced-motion: reduce) {
  .hero-intro #hero-info .typewriter .noising-text,
  #hero-info .typewriter .noising-text { animation: none !important; border-right: none !important; }
}

/* Space out appended follow-up blocks under hero info */
#hero-info .hero-followup-block { margin-top: 0.8rem; }
/* Glob√°ln√≠: povol str√°nkov√Ω scroll i na mobilech */
html, body {
  height: auto;
  min-height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: auto;
  touch-action: pan-y;
}
/* üîí Skryj scrollbary, ale zachovej scrollov√°n√≠ (Firefox + WebKit) */
html, body, .SYNTHOMAREADER, #reader-body, #reader-extra {
  scrollbar-width: none; /* Firefox */
}
html::-webkit-scrollbar,
body::-webkit-scrollbar,
.SYNTHOMAREADER::-webkit-scrollbar,
#reader-body::-webkit-scrollbar,
#reader-extra::-webkit-scrollbar {
  display: none; /* WebKit */
}
/* Reader controls toolbar */
.reader-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  margin: 0rem 0;
}

/* Panel typografie p≈ôesunuta do components.css (#control-panel base) */

.reader-controls::before {
  content: '';
  position: absolute;
  left: -1px;
  width: 4px;
  height: 130%;
  border-radius: 2px;
  background: rgb(0, 255, 255, 0);
  box-shadow: -1px 0 4px 0px var(--accent-warning), 1px 0 8px 0px var(--accent-warning), 0px 0 12px 0px var(--accent-warning);
  animation: border-glow 2.6s infinite cubic-bezier(.8,0,.23,1.1);
  z-index: 2;
  pointer-events: none;
  opacity: 0.6;
}

/* Stejn√Ω n√°stup jako CTA tlaƒç√≠tko */
.reader-controls.appear { 
  opacity: 0; 
  transform: translateY(6px) scale(0.99); 
  filter: brightness(.95) saturate(.98); 
}
.reader-controls.appear.visible { 
  opacity: 1; 
  transform: none; 
  filter: var(--filter-primary, none); 
  transition: opacity .6s ease .1s, transform .6s ease .1s, filter .6s ease; 
}

/* Title sizing without inline style ‚Äì odstranƒõno: nepou≈æ√≠v√°me .reader-title (t≈ô√≠da) */

/* Terminal should grow with content: hide scrollbars only when requested */
/* odstranƒõno: [data-scroll-hide="1"] nepou≈æ√≠v√°me */

/* odstranƒõno: .popup-content nepou≈æ√≠v√°me */

/* üéØ Vylep≈°en√© font utility t≈ô√≠dy */
/* odstranƒõno: .font-text01 nepou≈æ√≠v√°me */

.speed-btn {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  color: var(--text-primary);
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  font-family: var(--font-family-mono);
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 3px;
}

.speed-btn:hover {
  background: var(--border-secondary);
  transform: translateY(-1px);
}

.speed-btn.active {
  background: var(--accent-primary);
  color: var(--bg-primary);
  box-shadow: 0 0 8px var(--glow-primary);
}

/* Hide rich-hidden containers (content source for typewriter) */
.rich-hidden { display: none !important; }

/* üåÉ Hide story cache for branching narratives */
.hidden { display: none !important; }
#story-cache { display: none !important; }

/* üé≠ Debug m√≥d pro v√Ωvoj√°≈ôe */
.debug-mode .rich-hidden {
  display: block !important;
  opacity: 0.3;
  border: 1px dashed #ff00ff;
  margin: 1rem 0;
}

.debug-mode .hidden {
  display: block !important;
  opacity: 0.2;
  border: 1px dashed #00ffff;
  margin: 1rem 0;
}

.debug-mode .tw-line {
  border-left: 2px solid rgba(0, 255, 255, 0.3);
  padding-left: 0.5rem;
}

/* CTA button spacing without inline style */
.hero-cta .glitch-button.appear { margin: 2rem auto; }

/* üé™ Easter egg: Konami k√≥d aktivace */
.konami-activated {
  filter: hue-rotate(180deg) saturate(1.5);
  animation: rainbow-pulse 2s infinite;
}

@keyframes rainbow-pulse {
  0%, 100% { filter: hue-rotate(0deg) saturate(1); }
  25% { filter: hue-rotate(90deg) saturate(1.5); }
  50% { filter: hue-rotate(180deg) saturate(2); }
  75% { filter: hue-rotate(270deg) saturate(1.5); }
}
/* SYNTHOMA Reader Styles ‚Äì oddƒõlen√© a theme-aware, aby text neplakal a UX neum≈ôelo. */

/* üõë Vylep≈°en√Ω kill-switch pro animace s accessibility */
.no-animations .SYNTHOMAREADER,
.no-animations .chapter-container,
.no-animations .chapter-title,
.no-animations .chapter-content,
.no-animations .typing-cursor,
.no-animations .scanline,
.no-animations .loading-spinner,
.no-animations .tw-line,
.no-animations .alarm-emote { 
  animation: none !important; 
  transition: none !important; 
  opacity: 1 !important; 
  transform: none !important; 
}
.no-animations .typing-cursor { display: none !important; }

/* üéØ Respektuj system preference pro reduced motion */
@media (prefers-reduced-motion: reduce) {
  .tw-line,
  .alarm-emote,
  .reader-controls button::before {
    animation: none !important;
    transition: none !important;
  }
  
}

/* Explicitnƒõ povol alarm-emote i p≈ôi reduced motion, pokud je ƒçteƒçka v allow-alarm m√≥du */
.SYNTHOMAREADER.allow-alarm .alarm-emote {
  animation: alarmPulse 1.1s ease-in-out infinite !important;
}
@media (prefers-reduced-motion: reduce) {
  .SYNTHOMAREADER.allow-alarm .alarm-emote {
    animation: alarmPulse 1.1s ease-in-out infinite !important;
  }
}
/* P≈ôetlaƒç glob√°ln√≠ kill-switch: i kdy≈æ je na <body> .no-animations, v re≈æimu allow-alarm nech alarm-emote ≈æ√≠t */
body.no-animations .SYNTHOMAREADER.allow-alarm .alarm-emote {
  animation: alarmPulse 1.05s ease-in-out infinite !important;
}

/* Pojistka: v readeru v≈ædy pulzuj alarm-emote (vy≈°≈°√≠ specificita na kontejnery obsahu) */
#reader-body .alarm-emote,
#reader-extra .alarm-emote {
  animation: alarmPulse 1.05s ease-in-out infinite !important;
  will-change: transform, opacity;
}

/* Lok√°ln√≠ definice keyframes pro p≈ô√≠pad, ≈æe by glob√°ln√≠ nebyly k dispozici */
@keyframes alarmPulse {
  0%, 100% { transform: scale(1); opacity: 0.85; }
  50% { transform: scale(1.08); opacity: 1; }
}

/* P≈ôesunuto v√Ω≈°e do vylep≈°en√© sekce accessibility */

/* Kontejner ƒçteƒçky */
.SYNTHOMAREADER {
  position: relative;
  display: block;
  width: 100%;
  max-width: 900px;
  border-radius: 15px;
  border: 1px solid var(--border-secondary);
  /* Center the reader and keep reasonable vertical spacing */
  margin-left: auto;
  margin-right: auto;
  margin-top: 3vh;
  margin-bottom: 4vh;
  /* Remove left padding so the neon column can sit flush to the edge */
  padding: 1rem 1rem 1rem 0;
  box-sizing: border-box;
  color: var(--text-primary);
  line-height: 1.2;
  /* Page-level scroll: nepou≈æ√≠vej vnit≈ôn√≠ scroll v readeru */
  overflow: visible;
  min-height: 200px;
  opacity: 1;
  /* Transparent background with subtle neon border glow */
  background: transparent;
  /* Neon glow ≈ô√≠zen√Ω kontroln√≠m panelem p≈ôes CSS promƒõnn√© */
  --reader-glow-radius: var(--reader-glow-radius, 10px);
  --reader-glow-alpha: var(--reader-glow-alpha, 35%);
  box-shadow: 0 0 var(--reader-glow-radius) color-mix(in oklab, var(--glow-secondary) var(--reader-glow-alpha), transparent);
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  -webkit-user-select: none; -moz-user-select: none; user-select: none;
  --use-components-styles: true;
  /* mus√≠ b√Ωt NAD glitch/noise canvasy (z=1-2), jinak nem√° co rozmaz√°vat */
  z-index: 5;
}

/* Unified background overlay for all readers using CSS variables. */
.SYNTHOMAREADER::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;
  border-radius: inherit;
  /* Respect app-level vars first, then reader vars, with sensible defaults */
  background-color: rgba(0, 0, 0, var(--app-bg-opacity, var(--bg-opacity, 1)));
  background-image: var(--bg-image, none);
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  filter: var(--app-bg-blur, var(--bg-blur, none));
  pointer-events: none;
}





/* Performance hints for large scroll containers removed to prevent pop-in on mobile */

/* Glass mode: aplikuj stejn√© chov√°n√≠ jako u control panelu */
.SYNTHOMAREADER.glass {
  /* Silnƒõj≈°√≠ vizu√°ln√≠ efekt + spolehlivƒõj≈°√≠ compositing */
  background: rgba(var(--bg-secondary-rgb), 0.18) !important;
  -webkit-backdrop-filter: blur(var(--glass-blur, 80px)) !important;
  backdrop-filter: blur(var(--glass-blur, 80px)) !important;
  border: 1px solid var(--border-secondary);
  /* dr≈æ ƒçteƒçku nad #noise-canvas (z=1) a #glitch-bg (z=2) */
  z-index: 5;
  will-change: backdrop-filter;
}

/* In glass mode, do not paint the ::before overlay (so the blur is visible). */
.SYNTHOMAREADER.glass::before {
  content: none !important;
  background: none !important;
}

@supports not (background: color-mix(in oklab, red, transparent)) {
  /* Fallback pro prohl√≠≈æeƒçe bez color-mix: dr≈æ aspo≈à ƒçern√© sklo */
  .SYNTHOMAREADER.glass { background: rgba(0,0,0,0.28) !important; }
}



.SYNTHOMAREADER.chapter-loaded { animation: fadeIn 0.5s ease-in-out; }


/* Loading stavy pro kapitoly */
.loading-chapter {
  display: flex; justify-content: center; align-items: center; min-height: 300px;
  color: var(--text-primary);
  font-family: var(--font-family-mono, 'VT323', monospace);
  font-size: calc(1.1rem * var(--font-size-multiplier));
  text-align: center;
  padding: 1rem;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-secondary);
  border-radius: 5px;
  margin-left: 1rem;
}
.loading-chapter p { margin: 0; color: var(--text-primary); text-shadow: 0 0 10px var(--glow-secondary); }
.loading-animation { margin-top: 0rem; width: 50px; height: 50px; border: 3px solid var(--border-secondary); border-radius: 50%; border-top-color: var(--accent-secondary); animation: spin 1s ease-in-out infinite; }

/* Error stavy ‚Äì kdy≈æ backend ≈ôekne "haha, ne dnes" */
.error { text-align: center; color: #f00; font-family: 'Text01', monospace; font-size: 1.1rem; margin: 2rem 0; text-shadow: 0 0 10px #f00; }
.error-message { background: rgba(255, 0, 0, 0.1); border: 1px solid rgba(255, 0, 0, 0.3); border-radius: 5px; padding: 1.5rem; margin: 1rem 0; text-align: center; color: #ff5555; }
.error-message h3 { margin: 0; color: #ff4444; }
.error-message p { margin: 0.5rem 0; color: #ff8888; }
.retry-button { background: rgba(255, 68, 68, 0.1); border: 1px solid #ff4444; color: #ff8888; padding: 0.5rem 1rem; margin-top: 1rem; cursor: pointer; transition: all 0.3s ease; font-family: var(--font-family-mono, 'VT323', monospace); font-size: 1rem; border-radius: 4px; }
.retry-button:hover { background: rgba(255, 68, 68, 0.3); color: #fff; border-color: #ff0000; }

/* (odstranƒõno) Kapitoly: seznam a polo≈æky ‚Äì UI ji≈æ nepou≈æ√≠v√°me */


/* Oprava: po dops√°n√≠ typewriteru nenech <a> zmodrat a podtrhnout ‚Äì dr≈æ se stylu textu */
#reader-content a,
#reader-body a,
#reader-extra a {
  color: inherit;
  text-decoration: none;
  font: inherit;
}
#reader-content a:visited,
#reader-body a:visited,
#reader-extra a:visited {
  color: inherit;
}
/* jemn√© zv√Ωraznƒõn√≠ na hover m√≠sto defaultn√≠ho modr√©ho cirkusu */
#reader-content a:hover,
#reader-body a:hover,
#reader-extra a:hover {
  text-decoration: underline;
  text-decoration-color: var(--accent-secondary);
  text-underline-offset: 2px;
}
/* stav zamƒçeno a vybr√°no pro odkazy v readeru */
#reader-content a.disabled,
#reader-body a.disabled,
#reader-extra a.disabled {
  opacity: 0.5;
  cursor: default;
  pointer-events: none;
  text-decoration: none !important;
}
#reader-content a.selected,
#reader-body a.selected,
#reader-extra a.selected {
  color: var(--accent-primary, #00ffff);
  text-shadow: 0 0 6px var(--glow-primary, #00ffff);
  border-bottom: 1px dashed currentColor;
}
/* Interaktivn√≠ volby */
.choice-box {
  display: flex;
  font-family: var(--font-family-primary-bold);
  font-weight: bold;
  /* V≈ædycky pod sebou ‚Äì ≈æ√°dn√© vedle sebe cirkusy */
  flex-direction: column;
  flex-wrap: nowrap;
  gap: 10px;
  margin-left: 1.5rem;
  margin-right: 3rem;
  margin-top: 3rem;
  margin-bottom: 2rem;
  align-items: stretch;
  justify-content: flex-start;
}

.choice-box .choice-link {
  color: inherit;
  text-decoration: none;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 6px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
  /* Pln√° ≈°√≠≈ôka pro pƒõkn√© ‚Äû≈ô√°dky‚Äú odpovƒõd√≠ */
  display: block;
  width: 100%;
  /* a≈• 100% respektuje vnit≈ôn√≠ padding kontejneru a nelep√≠ se na prav√Ω okraj */
  box-sizing: border-box;
}

.choice-box .choice-link:hover { 
  background: var(--border-secondary, 0.5);
  box-shadow: 0 0 10px var(--glow-secondary);
  transform: translateY(-1px);
  text-decoration: none; 
}
.choice-box .choice-link:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-primary) 35%, transparent);
  text-decoration: none;
}
.choice-box .choice-link.selected {
  background: rgba(0,255,255,0.08);
  box-shadow: 0 0 12px var(--glow-primary);
}

/* ‚úÖ Checkmark + pop animace pro vybranou volbu */
.choice-box .choice-link.selected {
  position: relative;
}
.choice-box .choice-link.selected::after {
  content: '‚úî';
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%) scale(0.6);
  color: var(--accent-primary, #00ffff);
  text-shadow: 0 0 6px var(--glow-primary);
  opacity: 0;
  animation: checkPop 260ms ease forwards;
}
@keyframes checkPop { to { opacity: 1; transform: translateY(-50%) scale(1); } }

/* üé¨ Kapitolov√© pozad√≠: video/audio vrstva pod obsahem */
.chapter-media {
  position: absolute;
  inset: 0;
  z-index: 0; /* pod .chapter-content */
  overflow: hidden;
  border-radius: inherit;
  pointer-events: none;
}
.chapter-bg-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(0.6) saturate(1.05) blur(0.5px);
  opacity: 0.18;
}
.chapter-bg-audio { display: none; }

/* Udr≈æ obsah nad videem */
.chapter-content { position: relative; z-index: 1; }

/* Keyboard focus for book/chapter links */
a.book-link:focus-visible,
a.chapter-link:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
  text-decoration: none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-primary) 28%, transparent);
}
.choice-box .choice-link.disabled {
  opacity: 0.55;
  cursor: default;
  box-shadow: none;
}


/* specificky pro linky knih/kapitol ‚Äì a≈• vypadaj√≠ jako text se ≈°ipkou, ne jako 90s hypertext */
.book-link {
  color: inherit;
  font-family: var(--font-family-mono);
  text-decoration: none;
  font-weight: bold;
  font-size: calc(1.6rem * var(--font-size-multiplier));
  margin-left: 80px;
  cursor: pointer;
}

.chapter-link {
  color: inherit;
  text-decoration: none;
  margin-left: 70px;
  cursor: pointer;
}
.book-link:hover {
  transform: translateY(-2px);
  animation: glitch 1s infinite;
}


.chapter-link:hover {
  text-decoration: underline;
  transform: translateY(-2px);
  animation: glitch 1s infinite;
}

/* Responsivn√≠ doladƒõn√≠ */
@media (max-width: 768px) {
  /* ƒåteƒçka: respektuj postrann√≠ okraje a nelep se na hrany obrazovky */
  /* Volby: odstra≈à zbyteƒçn√© boƒçn√≠ odsazen√≠ na √∫zk√Ωch displej√≠ch */
  .choice-box {
    margin-left: 0rem;
    margin-right: 0rem;
    /* p≈ôidej vnit≈ôn√≠ odsazen√≠, aby linky neml√°tily do prav√©ho okraje */
    padding-left: 12px;
    padding-right: 12px;
  }
  /* Linky knih a kapitol: men≈°√≠ lev√° mezera na mobilech */
  .book-link { margin-left: 24px; }
  .chapter-link { margin-left: 20px; }
  .chapter-list { padding: 16px; }
  .chapter-item { padding: 15px 14px; font-size: 1.2rem; }
  .chapter-list h2 { font-size: 1.6rem; }
}

/* Dark mode kompatibilita (re√°lnƒõ p≈ôeb√≠r√° t√©ma, ale nech√°me fallbacky) */
@media (prefers-color-scheme: dark) {
  .chapter-item { background: rgba(0,255,255,0.12); }
  .chapter-item:hover { background: rgba(0,255,255,0.25); }
}

/* =========================
   Kapitola: z√°kladn√≠ styly
   ========================= */
/* C√≠le jen v r√°mci reader host≈Ø, a≈• to nebouchne mimo ƒçteƒçku */
#reader-body, #reader-extra {
  /* v√Ωchoz√≠ p√≠smo pro kapitoly */
  font-family: var(--font-family-reading, 'Text01', 'VT323', monospace);
  font-size: calc(1rem * var(--font-size-multiplier, 1));
  line-height: 1.5;
  color: var(--text-primary);
  position: relative; /* pro vrstven√≠ media pozad√≠ */
}

/* Title and log spacing without inline styles */

.SYNTHOMAREADER .log { opacity: 0.75; margin-bottom: 0.75rem; }

#reader-body img, #reader-extra img,
#reader-body video, #reader-extra video { max-width: 100%; height: auto; display: block; }

/* üî• VYMA≈Ω√ÅNO: Styly z reader.css pro .log, .dialog, .text, .title, .alarm-emote 
   Nech components.css ≈ô√≠dit v≈°echno! */

/* üí™ Jen minim√°ln√≠ fallback, pokud by components.css √∫plnƒõ selhal */
.SYNTHOMAREADER .log:not([class*="components"]),
.SYNTHOMAREADER .dialog:not([class*="components"]),
.SYNTHOMAREADER .text:not([class*="components"]),
.SYNTHOMAREADER .title:not([class*="components"]) {
  /* Jen z√°kladn√≠ display, zbytek nech components.css */
  display: block;
  position: relative;
}

/* üéØ Vylep≈°en√° alarm-pulse animace */
/* üî• ODSTRANƒöNO: v≈°echny konfliktni styly pro components.css elementy */

/* (konsolidace) --use-components-styles je nyn√≠ v hlavn√≠m bloku .SYNTHOMAREADER */

/* üåà Vylep≈°en√© neonov√© efekty s adaptivn√≠ intenzitou */
#reader-body [style], #reader-extra [style] { 
  filter: none;
  transition: all 0.3s ease;
}

/* üî• ODSTRANƒöNO: v≈°echny reader.css styly pro components.css elementy 
   Nech components.css m√≠t √∫plnou kontrolu! */

/* üéØ Intenzita podle user preference - aplikuje se na v≈°echny alarm-emote */
.glitch-minimal .alarm-emote {
  animation-duration: 2s !important;
  opacity: 0.7 !important;
}

.glitch-intense .alarm-emote {
  animation-duration: 0.5s !important;
  filter: drop-shadow(0 0 8px currentColor) !important;
}

/* üé® Typewriter efekty bƒõhem psan√≠ */
.tw-line {

  /* nezaƒç√≠nej neviditelnƒõ ‚Äì a≈• je progresivn√≠ psan√≠ .text vidƒõt */
  opacity: 1;
  transform: translateY(2px);
  animation: line-appear 0.4s ease forwards;
}

@keyframes line-appear {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ‚ö° Rychl√© nastaven√≠ pro instant m√≥d */
.typewriter-instant .tw-line {
  animation: none;
  opacity: 1;
  transform: none;
}

/* üì± Vylep≈°en√° mobiln√≠ responsivita */
@media (max-width: 800px) {
  .SYNTHOMAREADER {
    padding: 0rem;
    border-radius: 8px;
    font-size: calc(0.9rem * var(--font-size-multiplier, 1));
    /* dr≈æ postrann√≠ odsazen√≠ od okraj≈Ø displeje */
    margin-left: 0;
    margin-right: 0;
    max-width: calc(100% - 4px);
  }
  
  #reader-body, #reader-extra {
    line-height: 1.2;
    margin-left: 0rem;
    margin-right: 0.05rem;
  }
  
  /* üéØ Men≈°√≠ glowy na mobilu pro lep≈°√≠ ƒçitelnost */
  #reader-body .log, #reader-extra .log {
    text-shadow: 0 0 3px var(--glow-secondary);
  }
  
  #reader-body .title, #reader-extra .title {
    text-shadow: 0 0 4px var(--glow-secondary), 0 0 8px var(--glow-primary);
    /* Do not override font-size here; let components.css clamp control it */
    font-size: inherit;
  }
}

/* Control panel styles (m√≠sto inline styl≈Ø v JSX) */
.control-panel {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-6px);
  transition: opacity .3s ease, transform .3s ease;
}
.control-panel.visible {
  opacity: 1;
  pointer-events: auto;
  transform: none;
}

.controls-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.75rem 1rem;
}
@media (max-width: 700px){
  .controls-grid { grid-template-columns: 1fr; }
}
.controls-grid .group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  align-items: center;
}

/* Audio progress bar */
#progress-bar-container.progress {
  position: relative;
  width: 100%;
  height: 8px;
  background: rgba(var(--bg-secondary-rgb), 0.5);
  border: 1px solid var(--border-secondary);
  border-radius: 4px;
  overflow: hidden;
}
#progress-bar-container .progress#progress-bar,
#progress-bar {
  position: absolute;
  top: 0; left: 0; height: 100%; width: 0%;
  background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
  box-shadow: 0 0 8px var(--glow-primary);
}
.audio-buttons { display: flex; gap: 0.5rem; }

/* Playlist */
#playlist-container.playlist { display: flex; gap: 0.75rem; flex-wrap: wrap; }
#playlist-container.playlist a {
  color: inherit;
  text-decoration: none;
  font-family: var(--font-family-mono);
  font-size: 0.9rem;
  padding: 0.1rem 0.4rem;
  border: 1px solid var(--border-secondary);
  border-radius: 3px;
  background: rgba(var(--bg-secondary-rgb), 0.35);
  transition: background .2s ease, transform .15s ease;
}
#playlist-container.playlist a:hover { background: rgba(var(--bg-secondary-rgb), 0.5); transform: translateY(-1px); }
#playlist-container.playlist a.active { background: rgba(0,255,255,0.12); box-shadow: 0 0 8px var(--glow-primary); }

/* Footer toolbar variant */
.reader-controls.footer { justify-content: space-between; }

/* Footer log text style */
.reader-controls.footer .log { opacity: 0.7; font-size: 0.8rem; }

/* Chapter meta box (MBTI summary) */
.chapter-content.meta {
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0rem;
  border: 1px solid var(--border-secondary);
  border-radius: 10px;
}

/* Small utilities to avoid inline styles */
.muted { opacity: 0.8; }
.mt-1 { margin-top: 4px; }

/* üéÆ Interaktivn√≠ prvky s lep≈°√≠m feedbackem */
.reader-controls button {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.reader-controls button::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(0, 255, 255, 0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.6s ease, height 0.6s ease;
}

.reader-controls button:active::before {
  width: 200px;
  height: 200px;
}

/* üî• Performance optimalizace pro animace */
.tw-line,
.alarm-emote,
.reader-controls button {
  will-change: transform, opacity;
}

/* ===== Utilities for reader components (avoid inline styles) ===== */
/* Screen reader only (visually hidden) */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Full overlay center helper inside chapter-content */
.chapter-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.chapter-overlay.loading { color: var(--text-primary); }
.chapter-overlay.warning { color: var(--accent-warning, #ffb300); }

